---
import "../../styles/global.css";
import { getCollection } from "astro:content";
const { tag } = Astro.params;
const posts = (await getCollection("posts"))
  .filter(p => !p.data.draft && p.data.tags.includes(tag));
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tag: {tag} | Shuvo’s Notes</title>
  </head>
  <body class="max-w-3xl mx-auto px-4">
    <a href="/" class="inline-block mt-6 text-sm hover:underline">← All posts</a>
    <h1 class="text-3xl font-bold mt-4">Tag: {tag}</h1>
    <ul class="mt-6 space-y-6">
      {posts.map(({ slug, data }) => (
        <li>
          <a href={`/posts/${slug}/`} class="text-xl font-semibold hover:underline">{data.title}</a>
          <p class="opacity-80">{data.description}</p>
        </li>
      ))}
    </ul>
  </body>
</html>
